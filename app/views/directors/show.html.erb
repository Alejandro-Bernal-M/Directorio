<section id="director-show">
  <h2>Hola <%= @director.username %></h2>
  <div class= "groups-container">
    <p><span class="profile-title">Estos son tus grupos:</span> </p>
    <div class="group">
      <% @groups_with_requests.each do |group| %>
        <p><span class="profile-title">Grupo:</span></p>
          <div style="background-color:<%= group[:group_color]  %>; " class="group-header">
          <h3> <%= group[:group_name] %> </h3>
          <p> <%= group[:group_slogan] %> </p>
          <%= link_to 'Directorio del grupo', group_path(group) %>
        </div>
        <div class="group-requests">
          <p><span class="profile-title">Miembros:</span></p>
          <% if group[:group_members].present? %>
            <% group[:group_members].each do |member| %>
              <div class="group-request">
                <div class="group-request-user">
                  <div class="group-request-user-image">
                    <%= cl_image_tag(member.image.key, :width => 200, crop: :fill) if member.image.attached? %>
                  </div>
                  <div class="group-request-user-info">
                    <p><%= member.full_name %></p>
                    <p><%= member.email %></p>
                    <p><%= member.cellphone %></p>
                    <%= link_to 'Ver perfil', user_path(member.id) %>
                  </div>
                  <div class="request-btns">
                    <%= button_to 'Eliminar del grupo', groups_user_path(user_id: member.id, group_id: group[:group_id]), method: :delete , class: 'btn'%>
                  </div>
                </div>
              </div>
            <% end %>
          <% else %>
            <p> Sin Miembros. </p>
          <% end %>
        </div>
        <div class="group-requests">
          <p><span class="profile-title">Solicitudes:</span></p>
          <% if group[:requests].present? %>
            <% group[:requests].each do |request| %>
              <div class="group-request">
                <div class="group-request-user">
                  <div class="group-request-user-image">
                    <%= cl_image_tag(request[:user].image.key, :width => 200, crop: :fill) if request[:user].image.attached? %>
                  </div>
                  <div class="group-request-user-info">
                    <p><%= request[:user].full_name %></p>
                    <p><%= request[:user].email %></p>
                    <p><%= request[:user].cellphone %></p>
                    <%= link_to 'Ver perfil', user_path(request[:user].id) %>
                  </div>
                </div>
                <div class="request-btns">
                  <%= button_to 'Aceptar', groups_users_path(user_id: request[:user].id, request_id: request[:request_id], group_id: group[:group_id]), method: :create, class: 'btn' %>
                  <%= button_to 'Rechazar', assignation_path(request_id: request[:request_id]), method: :delete, class: 'btn' %>
                </div>
              </div>
              <% end %>
              <% else %>
              <p> Sin solicitudes. </p>
            <% end %>
          <% end %>
        </div>
    </div>
  </div>
</section>
        